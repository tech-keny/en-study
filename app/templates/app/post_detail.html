{% extends "app/base.html" %}
{% load widget_tweaks %}
{% load static %}


{% block content %}

<a href="{% url 'account_logout' %}">
    <button class="logout-btn py-1 ml-auto">ログアウトする</button>
</a>
<a href="{% url 'account_login' %}">
    <button class="logout-btn py-1 ml-auto">ログインする</button>
</a>
<a href="{% url 'account_signup' %}">
    <button class="logout-btn py-1 ml-auto">サインアップする</button>
</a>



<div class="post-detail-frame mx-auto mt-5">
    <div class="d-flex">
        <img src="{{ post_data.author.profile.image.url }}" alt="">
        <div class="author pl-5">{{post_data.author}}　さんの投稿</div>
        <div class="updated ml-5 mt-2">投稿日:　{{ post_data.updated }}</div>
    </div>
    <hr>
    <div class="d-flex">
        <div class="title mx-auto">{{ post_data.title }}</div>
        <div class="study-time mr-5 mt-2">{{ post_data.study_time }}分/日</div>
    </div>
    <div class="level text-right mr-5">レベル:　{{ post_data.level }}</div>
    <div class="group text-right mr-5">グループ:　{{ post_data.group }}</div>
    <div class="d-flex">
    {% if post_data.image %}
        <img class="image ml-5" src="{{ post_data.image.url }}" alt="" style="width:150px; height:auto; object-fit: contain;" />
        <div class="ml-5 content-set">
            <div class="text-book ml-auto mb-3">使用した参考書：<br>{{ post_data.textbook }}</div>
            <hr>
            <div class="content ml-auto mb-5">{{ post_data.content }}</div>
        </div>
    </div>
    {% else %}
        <img class="image" src="{% static 'img/phrase.jpg' %}" alt="" style="width: 150px; height:auto; object-fit: contain;" />
        <div class="ml-5 content-set">
            <div class="text-book ml-auto mb-3">使用した参考書：<br>{{ post_data.textbook }}</div>
            <hr>
            <div class="content ml-auto mb-5">{{ post_data.content }}</div>
        </div>
    </div>
    {% endif %}
</div>

<div class="d-flex justify-content-center align-items-center">
    <div class="btn good-button ml-5 mr-5">
        <a href="{% url 'like' post_data.id %}">参考になった！</a>
    </div>
    <div>
    {{post_data.like_num}}件
    </div>
</div>



{% if user.is_authenticated %}
    <hr>
    <div class="d-flex mb-5">
        <a class="btn btn-warning mr-2" href="{% url 'post_edit' post_data.id %}">編集する</a>
        <a class="btn btn-danger" href="{% url 'post_delete' post_data.id %}">削除する</a>    
    </div>
{% endif %}

<h2 class="asking">この投稿への質問</h2>
{% if not post_data.comments.all %}
    この投稿への質問はありません。<a href="#">質問する</a>
{% else %}
    {% for comment in post_data.comments.all %}
        {{comment.created}}
        {{comment.user}}
        {{comment.content}}
    {% endfor %}
<p>質問があります。</p>

{% endif %}



{% endblock %}